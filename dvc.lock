schema: '2.0'
stages:
  build_model_input:
    cmd:
    - uv run python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: 54c59b805b5442f2a85633a53500d137.dir
      size: 5938137421
      nfiles: 106741
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: a93e0fb5bcc216fb5822dbe7ad2f6ada
      size: 6753
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: f53d05b24126028410c53c03e962b45b.dir
      size: 6856397547
      nfiles: 123188
  build_model_input_wildfire:
    cmd:
    - python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: fe129f2ec6008feb67bc91e9428f94ba.dir
      size: 5811038183
      nfiles: 104275
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: ec2df4b4e3d1462eef5c8e893b195553
      size: 6527
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 02c0d3d7823f4f42ad045258026c6934.dir
      size: 6099855615
      nfiles: 109486
  train_yolo_baseline_small:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/small/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_small --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/small/
      hash: md5
      md5: ddba6dd6e4bd3511a6a3c36bddd66d07.dir
      size: 918260107
      nfiles: 16447
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_small/
      hash: md5
      md5: ec3bea68d3ea6f0c58962bdbe6a80c29.dir
      size: 15044341
      nfiles: 22
  train_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/best.yaml --output-dir ./data/04_models/yolo/
      --experiment-name best --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: be4f899a77d663a148643530ac1823bb.dir
      size: 5938137440
      nfiles: 106741
    - path: ./scripts/model/yolo/configs/best.yaml
      hash: md5
      md5: 8650745586fcbef0c3ead9b0ccc1e6ef
      size: 194
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/best
      hash: md5
      md5: 1f8931623c1a27aa217b6c13237e21b7.dir
      size: 44111956
      nfiles: 25
  train_yolo_baseline:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_full --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: be4f899a77d663a148643530ac1823bb.dir
      size: 5938137440
      nfiles: 106741
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_full
      hash: md5
      md5: 203cb9f8805970f11197f8af720222f6.dir
      size: 15194705
      nfiles: 22
  build_manifest_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/build_manifest.py --save-dir ./data/06_reporting/yolo/best/
      --dir-model ./data/04_models/yolo/best/ --loglevel info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 1f8931623c1a27aa217b6c13237e21b7.dir
      size: 44111956
      nfiles: 25
    - path: ./scripts/model/yolo/build_manifest.py
      hash: md5
      md5: 6c3de4abb398e5f3df229d2c9fd7ee57
      size: 3120
    outs:
    - path: ./data/06_reporting/yolo/best/
      hash: md5
      md5: 2992ed448ed46500371871b5f8646950.dir
      size: 11761
      nfiles: 1
  export_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 94ef9f73100e7e3641012b73504954cf.dir
      size: 44143919
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 5d7824a4a4481dacc14caf7d8fa8a6d1
      size: 3280
    outs:
    - path: ./data/04_models/yolo-export/best/
      hash: md5
      md5: 1b22edd422df89fee53eff8c55adf263.dir
      size: 229212424
      nfiles: 12
  export_yolo_best@onnx-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 1f8931623c1a27aa217b6c13237e21b7.dir
      size: 44111956
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 7359812bdc1d52fd7175b14ea4ce39e7
      size: 3652
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/cpu
      hash: md5
      md5: 0fe6b00fa712d8b2439f2348db93ad13.dir
      size: 37806806
      nfiles: 1
  export_yolo_best@onnx-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 1f8931623c1a27aa217b6c13237e21b7.dir
      size: 44111956
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 7359812bdc1d52fd7175b14ea4ce39e7
      size: 3652
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/mps
      hash: md5
      md5: 4cf4aec84790862ce535c345c227a0ce.dir
      size: 37806806
      nfiles: 1
  export_yolo_best@ncnn-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: dee941c0d04d4be895bf95e23de66f40.dir
      size: 82440674
      nfiles: 26
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 7359812bdc1d52fd7175b14ea4ce39e7
      size: 3652
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/cpu
      hash: md5
      md5: f7c03e25ace07a607597cd9153224ce2.dir
      size: 38107184
      nfiles: 4
  export_yolo_best@ncnn-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: b4fc5d9dbebab8a9067827a045bd524d.dir
      size: 82440674
      nfiles: 26
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 7359812bdc1d52fd7175b14ea4ce39e7
      size: 3652
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/mps
      hash: md5
      md5: e8c14f13c1e7009a0b623fd1d0472058.dir
      size: 38107184
      nfiles: 4

schema: '2.0'
stages:
  build_model_input:
    cmd:
    - uv run python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: 08dc4b6823c84cd24507003aaa4d5cfb.dir
      size: 5910443241
      nfiles: 106273
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: a93e0fb5bcc216fb5822dbe7ad2f6ada
      size: 6753
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: c8833c1c0393ab033b54de34d627394f.dir
      size: 6822123958
      nfiles: 122594
  build_model_input_wildfire:
    cmd:
    - python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: fe129f2ec6008feb67bc91e9428f94ba.dir
      size: 5811038183
      nfiles: 104275
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: ec2df4b4e3d1462eef5c8e893b195553
      size: 6527
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 02c0d3d7823f4f42ad045258026c6934.dir
      size: 6099855615
      nfiles: 109486
  train_yolo_baseline_small:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/small/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_small --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/small/
      hash: md5
      md5: 8922471542fac157bc96a920dd924941.dir
      size: 911680698
      nfiles: 16321
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_small/
      hash: md5
      md5: 1eeacf3ac16f393085c5e5006fe9ad2f.dir
      size: 15006134
      nfiles: 22
  train_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/best.yaml --output-dir ./data/04_models/yolo/
      --experiment-name best --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: 8695bffc8984131dbc5e822376010b3a.dir
      size: 5910443260
      nfiles: 106273
    - path: ./scripts/model/yolo/configs/best.yaml
      hash: md5
      md5: 8650745586fcbef0c3ead9b0ccc1e6ef
      size: 194
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/best
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
  train_yolo_baseline:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_full --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: 8695bffc8984131dbc5e822376010b3a.dir
      size: 5910443260
      nfiles: 106273
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_full
      hash: md5
      md5: d4fbc18146955c4a774ebda0f9fad0ae.dir
      size: 15132458
      nfiles: 22
  build_manifest_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/build_manifest.py --save-dir ./data/06_reporting/yolo/best/
      --dir-model ./data/04_models/yolo/best/ --loglevel info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
    - path: ./scripts/model/yolo/build_manifest.py
      hash: md5
      md5: 6c3de4abb398e5f3df229d2c9fd7ee57
      size: 3120
    outs:
    - path: ./data/06_reporting/yolo/best/
      hash: md5
      md5: 8d3b26f29db7d070f8f25e9bbe66b544.dir
      size: 11761
      nfiles: 1
  export_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 94ef9f73100e7e3641012b73504954cf.dir
      size: 44143919
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 5d7824a4a4481dacc14caf7d8fa8a6d1
      size: 3280
    outs:
    - path: ./data/04_models/yolo-export/best/
      hash: md5
      md5: 1b22edd422df89fee53eff8c55adf263.dir
      size: 229212424
      nfiles: 12
  export_yolo_best@onnx-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/cpu
      hash: md5
      md5: 8912778dad60253811bb69dd217ca2e6.dir
      size: 37806806
      nfiles: 1
  export_yolo_best@onnx-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/mps
      hash: md5
      md5: d1e2e0390962a01a07402649d136f12f.dir
      size: 37806806
      nfiles: 1
  export_yolo_best@ncnn-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/cpu
      hash: md5
      md5: f74d9eab318ea2b390cf5b41a664661d.dir
      size: 76436222
      nfiles: 5
  export_yolo_best@ncnn-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 6ea728f6abf7c8de6eee661e52840893.dir
      size: 44027516
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/mps
      hash: md5
      md5: 23850b2ea92a1eb95d26eb402cc0cff1.dir
      size: 76436222
      nfiles: 5

schema: '2.0'
stages:
  build_model_input:
    cmd:
    - uv run python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: 70976f1813c2a17e1a40a9bb235ee62c.dir
      size: 5825615758
      nfiles: 104633
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: a93e0fb5bcc216fb5822dbe7ad2f6ada
      size: 6753
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 731e8b8742953c54dd4f6279e63e7770.dir
      size: 6721471866
      nfiles: 120686
  build_model_input_wildfire:
    cmd:
    - python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: fe129f2ec6008feb67bc91e9428f94ba.dir
      size: 5811038183
      nfiles: 104275
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: ec2df4b4e3d1462eef5c8e893b195553
      size: 6527
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 02c0d3d7823f4f42ad045258026c6934.dir
      size: 6099855615
      nfiles: 109486
  train_yolo_baseline_small:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/small/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_small --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/small/
      hash: md5
      md5: 8658ec873b21fa6d52410fc5f42558e0.dir
      size: 893512118
      nfiles: 16001
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_small/
      hash: md5
      md5: 0645294f79e08b6039853f05733019a8.dir
      size: 15080490
      nfiles: 22
  train_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/best.yaml --output-dir ./data/04_models/yolo/
      --experiment-name best --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: 820e82aad197b3840738f09d170d723e.dir
      size: 5825615777
      nfiles: 104633
    - path: ./scripts/model/yolo/configs/best.yaml
      hash: md5
      md5: 8650745586fcbef0c3ead9b0ccc1e6ef
      size: 194
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/best
      hash: md5
      md5: bfc69cb5d25e26e3429335e5dd5dc267.dir
      size: 44161209
      nfiles: 25
  train_yolo_baseline:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_full --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: b26351a48f025ec8f098a0f21e10aedf.dir
      size: 5811038202
      nfiles: 104275
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_full
      hash: md5
      md5: ab5e5eac6390b1ee7ca286d734e4ba7c.dir
      size: 15197236
      nfiles: 22
  build_manifest_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/build_manifest.py --save-dir ./data/06_reporting/yolo/best/
      --dir-model ./data/04_models/yolo/best/ --loglevel info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 57c355b09ebfdfec0a814a3bd1a99e37.dir
      size: 44143913
      nfiles: 25
    - path: ./scripts/model/yolo/build_manifest.py
      hash: md5
      md5: 6c3de4abb398e5f3df229d2c9fd7ee57
      size: 3120
    outs:
    - path: ./data/06_reporting/yolo/best/
      hash: md5
      md5: 4a0f7ded4c850f0eedf7c20b3d36a005.dir
      size: 11656
      nfiles: 1
  export_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 94ef9f73100e7e3641012b73504954cf.dir
      size: 44143919
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 5d7824a4a4481dacc14caf7d8fa8a6d1
      size: 3280
    outs:
    - path: ./data/04_models/yolo-export/best/
      hash: md5
      md5: 1b22edd422df89fee53eff8c55adf263.dir
      size: 229212424
      nfiles: 12
  export_yolo_best@onnx-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 57c355b09ebfdfec0a814a3bd1a99e37.dir
      size: 44143913
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/cpu
      hash: md5
      md5: 5aadac986133e82f8eb3854a5852296b.dir
      size: 37806848
      nfiles: 1
  export_yolo_best@onnx-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 57c355b09ebfdfec0a814a3bd1a99e37.dir
      size: 44143913
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/mps
      hash: md5
      md5: 8570671cec600b1ef7d2f05e12c4ca56.dir
      size: 37806848
      nfiles: 1
  export_yolo_best@ncnn-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 57c355b09ebfdfec0a814a3bd1a99e37.dir
      size: 44143913
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/cpu
      hash: md5
      md5: f8f51f289db089d996d78c65c43df463.dir
      size: 76436263
      nfiles: 5
  export_yolo_best@ncnn-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 57c355b09ebfdfec0a814a3bd1a99e37.dir
      size: 44143913
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/mps
      hash: md5
      md5: da717f01c3b2a53efba2ea8f2f3be10e.dir
      size: 76436263
      nfiles: 5

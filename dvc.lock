schema: '2.0'
stages:
  build_model_input:
    cmd:
    - uv run python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: 7bd9f328e01a620b1d2cd646f29fd465.dir
      size: 5959538123
      nfiles: 107205
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: a93e0fb5bcc216fb5822dbe7ad2f6ada
      size: 6753
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 79fc31980fab98dc2c942d8cce2347d3.dir
      size: 6874627182
      nfiles: 123652
  build_model_input_wildfire:
    cmd:
    - python ./scripts/data/model_input/build.py --input-dir ./data/01_raw/wildfire
      --output-dir ./data/03_model_input/wildfire/ --random-seed 0 --sampling-ratio
      0.05 --loglevel info
    deps:
    - path: ./data/01_raw/wildfire
      hash: md5
      md5: fe129f2ec6008feb67bc91e9428f94ba.dir
      size: 5811038183
      nfiles: 104275
    - path: ./scripts/data/model_input/build.py
      hash: md5
      md5: ec2df4b4e3d1462eef5c8e893b195553
      size: 6527
    outs:
    - path: ./data/03_model_input/wildfire/
      hash: md5
      md5: 02c0d3d7823f4f42ad045258026c6934.dir
      size: 6099855615
      nfiles: 109486
  train_yolo_baseline_small:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/small/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_small --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/small/
      hash: md5
      md5: 0b55cd11798ab418727e3110645adc89.dir
      size: 915089040
      nfiles: 16447
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_small/
      hash: md5
      md5: 07c358d5dde36d59fbeaefde513ce285.dir
      size: 15012935
      nfiles: 22
  train_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/best.yaml --output-dir ./data/04_models/yolo/
      --experiment-name best --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: 8703aeecf73b5d824c5ab6338db0b6c8.dir
      size: 5959538142
      nfiles: 107205
    - path: ./scripts/model/yolo/configs/best.yaml
      hash: md5
      md5: 8650745586fcbef0c3ead9b0ccc1e6ef
      size: 194
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/best
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
  train_yolo_baseline:
    cmd:
    - uv run python ./scripts/model/yolo/train.py --data ./data/03_model_input/wildfire/full/datasets/data.yaml
      --config ./scripts/model/yolo/configs/baseline.yaml --output-dir ./data/04_models/yolo/
      --experiment-name baseline_full --loglevel info
    deps:
    - path: ./data/03_model_input/wildfire/full/datasets/
      hash: md5
      md5: 8703aeecf73b5d824c5ab6338db0b6c8.dir
      size: 5959538142
      nfiles: 107205
    - path: ./scripts/model/yolo/configs/baseline.yaml
      hash: md5
      md5: b37b8bb5124d88d0143f8e1b74681daa
      size: 49
    - path: ./scripts/model/yolo/train.py
      hash: md5
      md5: a60551e9985e26e8277f0b2abf206635
      size: 2728
    outs:
    - path: ./data/04_models/yolo/baseline_full
      hash: md5
      md5: 0bc2e95ce15dd12cfd91b66208bc82fc.dir
      size: 15053579
      nfiles: 22
  build_manifest_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/build_manifest.py --save-dir ./data/06_reporting/yolo/best/
      --dir-model ./data/04_models/yolo/best/ --loglevel info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
    - path: ./scripts/model/yolo/build_manifest.py
      hash: md5
      md5: 6c3de4abb398e5f3df229d2c9fd7ee57
      size: 3120
    outs:
    - path: ./data/06_reporting/yolo/best/
      hash: md5
      md5: 8e0e66ae33dec4192328696eba7d5f57.dir
      size: 11756
      nfiles: 1
  export_yolo_best:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 94ef9f73100e7e3641012b73504954cf.dir
      size: 44143919
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: 5d7824a4a4481dacc14caf7d8fa8a6d1
      size: 3280
    outs:
    - path: ./data/04_models/yolo-export/best/
      hash: md5
      md5: 1b22edd422df89fee53eff8c55adf263.dir
      size: 229212424
      nfiles: 12
  export_yolo_best@onnx-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/cpu
      hash: md5
      md5: af979d45bb42e7955b20316cbc95bd8c.dir
      size: 37806800
      nfiles: 1
  export_yolo_best@onnx-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format onnx --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/onnx/mps
      hash: md5
      md5: f24d2a56c1763f7a41612ca59292b6ab.dir
      size: 37806800
      nfiles: 1
  export_yolo_best@ncnn-cpu:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device cpu --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/cpu
      hash: md5
      md5: c722cc3d14836e969a3c112a9748477c.dir
      size: 76431993
      nfiles: 5
  export_yolo_best@ncnn-mps:
    cmd:
    - uv run python ./scripts/model/yolo/export.py --output-dir ./data/04_models/yolo-export/best/
      --model-dir ./data/04_models/yolo/best/ --format ncnn --device mps --loglevel
      info
    deps:
    - path: ./data/04_models/yolo/best/
      hash: md5
      md5: 62b8ed6dc76e7b595e269cc43ec85e7f.dir
      size: 44089968
      nfiles: 25
    - path: ./scripts/model/yolo/export.py
      hash: md5
      md5: d570ceec8eddd2a1140f7fe2e138aead
      size: 3601
    outs:
    - path: ./data/04_models/yolo-export/best/ncnn/mps
      hash: md5
      md5: 4673ff7ea3a3348bf3bfb0b1b2aac5c1.dir
      size: 76431993
      nfiles: 5
